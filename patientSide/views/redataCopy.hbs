<div class = "top_buttons">
        <div class = "top_buttons_sidebar">
            <div id="mySidenav" class="sidenav">
                <a href="javascript:void(0)" class="closebtn" onclick="closeNav();toggle();">&times;</a>
                <a><span class="iconify" data-icon="gg:profile" style="color: black;height:35px; width:35px;"></span></a>
                <a href="#">{{patientName}}</a>
                <hr>
                <a href="/patient/recordingData">Recording data</a>
                <a href="/patient/viewData">Viewing data</a>
                <a href="/patient/leaderboard">Leaderboard</a>
                <hr>
                <a href="/patient/Home">Homepage</a>
                <a href="/patient/updatePwd">Change Password</a>
                <a href="/patient/aboutDiabetes">About diabetes</a>
                <a href="/patient/aboutWebsite">About this website</a>
                <a href='#' onclick="logout()">Log Out</a>
            </div>

            <div class ="top_buttons_sidebarButton">
                <span style="font-size:40px;cursor:pointer" onclick="openNav();toggle();">&#9776;</span>

            </div>

        </div>
        
        <div class = "top-profile-pic">
            <span class="iconify" data-icon="gg:profile" style=";height:35px; width:35px;"></span>
        </div>
</div>


<div class = "recordingDataMainContent" id = "blur"> 

        <div class = "title">
        <p>Your personal log for</p>
        <div id="current_date"></p>
            <script>
            date = new Date();
            year = date.getFullYear();
            month = date.getMonth() + 1;
            day = date.getDate();
            document.getElementById("current_date").innerHTML = year + "." + month + "." + day;
            </script>
        </div>
    </div>

    <form class="container" method="post" action=
        {{#with patientInfo}}
        "/patient/{{_id}}"
        {{/with}}
    
        id="myForm" name = "recordingDataForm" onsubmit="return verifyRecordingData()">

        <div class="form-group">
            <div class = "each">
                <div class = "line1">
                    <div class = "line1_left" id = "line1B">
                        {{#with patientInfo}}
                        <div class="red-star">
                           
                                <p>
                                    {{#if bloodGlucoseRequired}}
                                        ★
                                    {{/if}}
                                </p>
                            
                        </div>
                        {{/with}}

                        <div class = "topic" id = "topicB">
                            <p>Blood Glucose Level (nmol/L)</p>
                        </div>
                    </div>


                </div>

                <div class = "line">
                    <!-- new edited for tick -->
                    {{#with patientInfo}}
                    <div>
                        <!-- this is for determine wthether to freeze input box or not-->
                        <input step=".01" type="number" class="form-control" name="bloodGlucoseLevel" id = "BGLEntry"

                        

                        {{#if (isRequired bloodGlucoseRequired)}}
                            disabled = "disabled"

                        {{/if}} 
                        
                        {{#each historyData}}

                            {{#if (timeEQ when)}}

                                {{#if (isDataEntered bloodGlucoseLevel)}}
                                            
                                    disabled = "disabled"
                                    value = {{bloodGlucoseLevel}}

                                {{/if}}

                            {{/if}}

                        {{/each}}
                        
                        >
                    </div>
                    
                    
                    
                    {{/with}}
                    <!-- end-->
                </div>

            
            </div>
        </div>


        <div class="form-group">
            <div class = "each">
                <div class = "line1">
                    <div class = "line1_left" id = "line1B">
                        {{#with patientInfo}}
                        <div class="red-star">
                           
                                <p>
                                    {{#if weightRequired}}
                                        ★
                                    {{/if}}
                                </p>
                            
                        </div>
                        {{/with}}

                        <div class = "topic" id = "topicB">
                            <p>Weight(KG)</p>
                        </div>
                    </div>


                </div>

                <div class = "line">
                    <!-- new edited for tick -->
                    {{#with patientInfo}}
                    <div>
                        <!-- this is for determine wthether to freeze input box or not-->
                        <input step=".01" type="number" class="form-control" name="weight" id="weightEntry"

                        

                        {{#if (isRequired weightRequired)}}
                            disabled = "disabled"

                        {{/if}} 
                        
                        {{#each historyData}}

                            {{#if (timeEQ when)}}

                                {{#if (isDataEntered weight)}}
                                            
                                    disabled = "disabled"
                                    value = {{weight}}

                                {{/if}}

                            {{/if}}

                        {{/each}}
                        
                        >
                    </div>
                    
                    
                    
                    {{/with}}
                    <!-- end-->
                </div>

            
            </div>
        </div>


    

        <div class="form-group">
            <div class = "each">
                <div class = "line1">
                    <div class = "line1_left" id = "line1B">
                        {{#with patientInfo}}
                        <div class="red-star">
                           
                                <p>
                                    {{#if doseOfInsulinTakenRequired}}
                                        ★
                                    {{/if}}
                                </p>
                            
                        </div>
                        {{/with}}

                        <div class = "topic" id = "topicB">
                            <p>Dose of insulin taken (doeses)</p>
                        </div>
                    </div>


                </div>

                <div class = "line">
                    <!-- new edited for tick -->
                    {{#with patientInfo}}
                    <div>
                        <!-- this is for determine wthether to freeze input box or not-->
                        <input step=".01" type="number" class="form-control" name="doseOfInsulinTaken" id = "DOIEntry"

                        

                        {{#if (isRequired doseOfInsulinTakenRequired)}}
                            disabled = "disabled"

                        {{/if}} 
                        
                        {{#each historyData}}

                            {{#if (timeEQ when)}}

                                {{#if (isDataEntered doseOfInsulinTaken)}}
                                            
                                    disabled = "disabled"
                                    value = {{doseOfInsulinTaken}}

                                {{/if}}

                            {{/if}}

                        {{/each}}
                        
                        >
                    </div>
                    
                    
                    
                    {{/with}}
                    <!-- end-->
                </div>

            
            </div>
        </div>


        <div class="form-group">
            <div class = "each">
                <div class = "line1">
                    <div class = "line1_left" id = "line1B">
                        {{#with patientInfo}}
                        <div class="red-star">
                           
                                <p>
                                    {{#if exerciseRequired}}
                                        ★
                                    {{/if}}
                                </p>
                            
                        </div>
                        {{/with}}

                        <div class = "topic" id = "topicB">
                            <p>Exercise (steps)</p>
                        </div>
                    </div>


                </div>

                <div class = "line">
                    <!-- new edited for tick -->
                    {{#with patientInfo}}
                    <div>
                        <!-- this is for determine wthether to freeze input box or not-->
                        <input step=".01" type="number" class="form-control" name="exercise" id = "exerciseEntry"
                        
                        {{#if (isRequired exerciseRequired)}}
                            disabled = "disabled"

                        {{/if}} 
                        
                        {{#each historyData}}

                            {{#if (timeEQ when)}}

                                {{#if (isDataEntered exercise)}}
                                            
                                    disabled = "disabled"
                                    value = {{exercise}}

                                {{/if}}

                            {{/if}}

                        {{/each}}
                        
                        >
                    
                    </div>
                    
                    
                    {{/with}}
                    <!-- end-->
                </div>

            
            </div>
        </div>

        <div class = "submit">
            <button  class = "submit_button" onclick="myFunction();">submit</button>            
        </div>


        
        
    
    </form>

    <div class = "patient-comment">
            <div class="WorkingWithPatient-row3Wrapper-Block">
                    
                    <div class="patientComment">Your Comment</div>

                    <form name = "commentForm" method="post" onsubmit="return verify()" action= {{#with patientInfo}}"/patient/{{_id}}/comment"{{/with}}>
                    
                        <div class ="row3textarea">
                            <textarea name = 'patientComment' id = 'patientComment'></textarea>
                        </div>
                    

                        <div class = "row3button">
                            <button>Send</button>
                        </div>

                    </form>

            </div>

    </div>




</div>


    <script>

        function openNav() {
            document.getElementById("mySidenav").style.width = "50%";
        }
          
        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
        }

 
      
        //function for disabling input and making tick(animation)
        function myFunction() {

            //for exercise entry
            if(document.getElementById("exerciseEntry").value != ""){
  	            document.getElementById("exerciseEntry").readOnly= true;

            }

            if(document.getElementById("DOIEntry").value != ""){
  	            document.getElementById("DOIEntry").readOnly= true;
  
            }

            if(document.getElementById("weightEntry").value != ""){
  	            document.getElementById("weightEntry").readOnly= true;
          
            }

            if(document.getElementById("BGLEntry").value != ""){
  	            document.getElementById("BGLEntry").readOnly= true;
             
            }
        }       

       
        function logout() {
            var form = document.createElement("form");
            form.action = "/patient/logout";
            form.method = "post";
            var sbmt = document.createElement("input");
            sbmt.name = "logout-submit";
            form.appendChild(sbmt);
            document.body.appendChild(form);
            form.submit();
        }   

        function toggle(){
            var blur = document.getElementById('blur')
            blur.classList.toggle('active')
        } 


        function verify(){
            var textInput = document.forms["commentForm"]["patientComment"].value;
                if (textInput == "") {
                    alert("Comment cannot be empty");
                    return false;
                }
        }

        function verifyRecordingData(){
            var weightInput = document.getElementById("weightEntry").value;
            var BGLInput = document.getElementById("BGLEntry").value;
            var DOIInput = document.getElementById("DOIEntry").value;
            var exerciseInput = document.getElementById("exerciseEntry").value;


            if(weightInput != ""){
                return true;

            } else if (BGLInput != ""){
                return true;

            } else if (DOIInput != ""){
                return true;

            } else if (exerciseInput != ""){
                return true;

            } else {
                alert("data cannot be empty");
                return false;
            }

                
        }

    </script>